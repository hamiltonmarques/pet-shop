<!DOCTYPE html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pet Shop</title>
    <link href='https://fonts.googleapis.com/css?family=Baloo 2' rel='stylesheet'>
    <link href="https://cdn.lineicons.com/4.0/lineicons.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/content.css">
    <link rel="stylesheet" href="css/form.css">
    <link rel="stylesheet" href="css/carrousel.css">
</head>

<body>
    <div class="wrapper">
        <aside id="sidebar">
            <div class="d-flex">
                <button class="toggle-btn" type="button">
                    <i class="lni lni-grid-alt"></i>
                </button>
                <div class="sidebar-logo">
                    <a href="#">Menu</a>
                </div>
            </div>
            <!-- Menu lateral - lista dos itens que compoem o menu -->
            <ul class="sidebar-nav">
                <li class="sidebar-item">
                    <a href="index.html" class="sidebar-link">
                        <i class="lni lni-home"></i>
                        <span>Home</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="cadastro_cliente.html" class="sidebar-link">
                        <i class="lni lni-user"></i>
                        <span>Cadastro Cliente</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="cadastro_pet.html" class="sidebar-link">
                        <i class="lni lni-bug"></i>
                        <span>Cadastro Pet</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="produto.html" class="sidebar-link">
                        <i class="lni lni-cart"></i>
                        <span>Produto</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="servicos.html" class="sidebar-link">
                        <i class="lni lni-delivery"></i>
                        <span>Serviços</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="fale_conosco.html" class="sidebar-link">
                        <i class="lni lni-whatsapp"></i>
                        <span>Fale Conosco</span>
                    </a>
                </li>
            </ul>
        </aside>
        <div class="main">
            <div>
                <h1>
                    <img src="images/petshop.jpg" width="230" height="210" />
                </h1>
                <section class="container">
                    <header>Serviços</header>
                    <form action="#" class="form" id="serviceForm" onsubmit="return cancelaEnvio()">
                        <div class="select-box">
                            <select required id="pet" onchange="calcularPreco()">
                                <option value="" hidden>Selecionar Pet *</option>
                                <option value="pingo">Pingo</option>
                                <option value="thor">Thor</option>
                                <option value="belinha">Belinha</option>
                            </select>
                        </div>
                        <div class="select-box" style="margin-top: 35px;">
                            <select required id="servico" onchange="calcularPreco()">
                                <option value="" hidden>Selecionar Serviço *</option>
                                <option value="banho">Banho</option>
                                <option value="tosa">Banho e Tosa</option>
                            </select>
                        </div>

                        <div class="input-box address">
                            <div class="column">
                                <input type="text" placeholder="Data *" onfocus="this.type='date'"
                                    onblur="if (!this.value) this.type='text'" id="data" required />
                                <div class="select-box">
                                    <select required id="hora">
                                        <option value="" hidden>Horário *</option>
                                        <option>09:00</option>
                                        <option>10:00</option>
                                        <option>11:00</option>
                                        <option>13:00</option>
                                        <option>14:00</option>
                                        <option>15:00</option>
                                        <option>16:00</option>
                                        <option>17:00</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="input-box address">
                            <div class="column">
                                <div class="select-box">
                                    <select required id="buscar" onchange="calcularPreco()">
                                        <option value="" hidden>Buscar Pet *</option>
                                        <option value="true">Preciso que busquem meu pet em casa</option>
                                        <option value="false">Levarei meu pet até a petshop</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="column">
                            <div class="price" id="valorTotal">R$ 0</div>
                            <button class="btn btn-secondary" type="submit" onclick="agendaServico()">Adicionar</button>
                        </div>
                        <br>
                        <p style="text-align: left;color: #7e7e7e;font-size: large;">Descrição</p>
                        <p style="text-align: justify;color: #7e7e7e;">
                            O serviço de banho e tosa deixa seu pet limpinho e com visual novo! Utilizamos os melhores
                            shampoos anti-alérgicos, perfumados e que removem toda a sujeira sem causar irritação. A
                            estimativa de tempo é 45 minutos, para pets de pequeno porte e 1 hora para pets de grande
                            porte.
                        </p>
                    </form>
                </section>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="scripts/script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.10.6/dist/sweetalert2.all.min.js"></script>
    <script>
        // Essa funcao simula o calculo do valor total do servico
        function calcularPreco() {
            let pet = document.getElementById("pet").value;
            let servico = document.getElementById("servico").value;
            let buscar = document.getElementById("buscar").value;

            let preco;

            if (pet == "pingo") {
                preco = 25;
            } else
                if (pet == "thor") {
                    preco = 35;
                } else
                    if (pet == "belinha") {
                        preco = 45;
                    }
                    else {
                        preco = 0;
                    }

            if (servico == "banho") {
                preco += 20;
            }

            if (servico == "tosa") {
                preco += 40;
            }

            if (buscar == "true") {
                preco += 15;
            }

            // Atualizacao do valor do servico no componente
            document.getElementById("valorTotal").innerHTML = 'R$ ' + preco;
        }

        // Essa funcao simula o agendamento do servico
        function agendaServico() {

            let fields = new Array();

            fields.push(document.getElementById("buscar"));
            fields.push(document.getElementById("hora"));
            fields.push(document.getElementById("data"));
            fields.push(document.getElementById("servico"));
            fields.push(document.getElementById("pet"));

            if (isVazio(fields)) {
                // TODO: chamar endpoint que agenda servico

                // Uso do SweetAlert2
                Swal.fire({
                    title: "Novo Serviço",
                    text: "Serviço agendado com sucesso!",
                    icon: "success"
                }).then(function () {
                    document.getElementById("serviceForm").reset();                    
                    // Zerar o valor do servico no componente
                    document.getElementById("valorTotal").innerHTML = 'R$ 0';
                });
            }
        }
    </script>
</body>

</html>